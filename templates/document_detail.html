<!-- C:\chatbot\ask_me\templates\document_detail.html -->

{% load static %}
{% include "header.html" %}

<body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 min-h-screen">
  <main class="w-full max-w-4xl mx-auto py-10 px-4">
    <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6">

      <!-- Document Title -->
      <h2 class="text-2xl font-bold text-center mb-6">
        üìÑ Document Details
      </h2>

      <!-- Document Info -->
      <div class="text-sm text-gray-600 dark:text-gray-300 mb-4">
        <p><strong>Uploaded By:</strong> {{ document.user.username }}</p>
        <p><strong>Uploaded At:</strong> {{ document.uploaded_at|date:"d M Y, H:i" }}</p>
        <p><strong>Document Type:</strong> {{ document.get_doc_type_display }}</p>
      </div>

      <!-- OCR Text Section -->
      {% if document.extracted_text %}
        <div class="mt-6">
          <h3 class="font-semibold text-lg mb-2">Extracted Text</h3>
          <div class="bg-gray-100 dark:bg-gray-700 p-4 rounded-xl whitespace-pre-wrap text-sm">
            {{ document.extracted_text }}
          </div>
        </div>
      {% endif %}

      <!-- Extracted Data Fields -->
      {% if document.extracted_data %}
        <div class="mt-6">
          <h3 class="font-semibold text-lg mb-2">Extracted Fields</h3>

          {% for page, fields in document.extracted_data.items %}
            <h4 class="font-medium mt-4">{{ page|capfirst }}</h4>
            <ul class="list-disc pl-5 text-sm">
              {% for key, value in fields.items %}
                <li><strong>{{ key|title }}:</strong> {{ value }}</li>
              {% endfor %}
            </ul>
          {% endfor %}

          <!-- Edit Button -->
          <div class="mt-4">
            <a href="{% url 'core:edit_document' document.pk %}"
               class="inline-block px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-xl font-medium transition-all duration-200">
              ‚úèÔ∏è Edit Extracted Data
            </a>
          </div>
        </div>
      {% else %}
        <p class="text-gray-500 dark:text-gray-400 mt-6 italic">
          No extracted data available for this document.
        </p>
      {% endif %}

      <!-- Back to Dashboard -->
      <div class="mt-8 text-center">
        <a href="{% url 'core:index' %}"
           class="inline-block px-5 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-medium transition-all duration-200">
          ‚Üê Back to Dashboard
        </a>
      </div>

    </div>
  </main>
</body>

{% include "footer.html" %}
